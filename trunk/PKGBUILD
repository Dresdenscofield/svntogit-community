# $Id$
#Maintainer:  Ionut Biru <ibiru@archlinux.org>
#Contributor: Hugo Doria <hugo@archlinux.org>
#Contributor: Sergej Chodarev <sergejx@centrum.sk>
#Contributor: zhuqin <zhuqin83@gmail.com>

pkgname=gedit-plugins
pkgver=2.32.0
pkgrel=1
pkgdesc="Set of plugins for gedit"
arch=('i686' 'x86_64')
license=('GPL')
url="http://live.gnome.org/GeditPlugins"
depends=('gedit>=2.30.0' 'vte' 'gucharmap' 'gnome-python' 'dbus-python')
makedepends=('intltool' 'pkgconfig' 'gnome-doc-utils>=0.20.0')
options=('!libtool' '!emptydirs')
install=gedit-plugins.install
source=(ftp://ftp.gnome.org/pub/gnome/sources/gedit-plugins/2.32/$pkgname-$pkgver.tar.bz2)
sha256sums=('2ef7bf48e9500556d84ae4c2950f4eadcc3f9cb9c58c90f2c83956b0ddad1107')

build() {
  cd $srcdir/$pkgname-$pkgver
  ./configure --prefix=/usr --sysconfdir=/etc --with-plugins=all

  make
  make GCONF_DISABLE_MAKEFILE_SCHEMA_INSTALL=1 DESTDIR=$pkgdir install

  install -m755 -d $pkgdir/usr/share/gconf/schemas
  gconf-merge-schema $pkgdir/usr/share/gconf/schemas/${pkgname}.schemas $pkgdir/etc/gconf/schemas/*.schemas
  rm -f $pkgdir/etc/gconf/schemas/*.schemas
}
