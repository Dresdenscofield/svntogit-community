# Maintainer: Levente Polyak <anthraxx[at]archlinux[dot]org>
# Contributor: Daniel J Griffiths <ghost1227@archlinux.us>
# Contributor: Alexander Fehr <pizzapunk gmail com>

pkgname=filezilla
pkgver=3.62.1
pkgrel=1
pkgdesc='Fast and reliable FTP, FTPS and SFTP client'
url='https://filezilla-project.org/'
arch=('x86_64')
license=('GPL')
depends=(
  'dbus' 'xdg-utils' 'wxwidgets-gtk3' 'libidn' 'hicolor-icon-theme' 'sqlite'
  'gnutls' 'libfilezilla'
  libfilezilla.so libdbus-1.so libgtk-3.so libgdk-3.so libnettle.so
)
source=(https://download.filezilla-project.org/client/FileZilla_${pkgver}_src.tar.bz2
        wxwidgets-3.2.patch)
sha256sums=('3c73c52384e366306cfd0edf75b7bb858856c7d74adecc2f0c7a28883835a4a2'
            'd1b55c763222b625b24e97e2982a0eed5fa16a18909a7a3f86f06b246c2bf3d8')
sha512sums=('ac69596a528b2e4140dd9b24c00aba7c08c06c9e6ad50c33ffef5b88686e5487420d02dfb79dd00e8b8afd545125096abfe6d49d10561e64fd120e95670a13f1'
            '0f92bd0180830fdb54cfb2eff2b6ebb3413aaace2b901300ca2f192b5abffea28f511eb26dea4eb8fb2ff8b951d15b4c39bef77cad59542b9f3632bbddd79183')

prepare() {
  cd ${pkgname}-${pkgver}
  patch -p1 < ../wxwidgets-3.2.patch # Allow building with wxWidgets 3.2
  autoreconf -vif
}

build() {
  cd ${pkgname}-${pkgver}
  ./configure \
    --prefix=/usr \
    --disable-manualupdatecheck \
    --disable-autoupdatecheck \
    --with-pugixml=builtin
  make
}

package() {
  cd ${pkgname}-${pkgver}
  make DESTDIR="${pkgdir}" install
}

# vim: ts=2 sw=2 et:
